# Claude Rules

Primary instructions for all Claude Code sessions in this project.

## Entry Point

**Always check `CLAUDE.md` first** - This is the master index that points to all project documentation in `.claudedoc/`. Read it at the start of every session to understand project context, patterns, and current state.

At the start of every session, or when you need project context, read `CLAUDE.md`. That file contains the index for all project documentation located in the `.claudedoc/` folder. Always refer to these docs before suggesting architectural changes.

## Context Management

- Keep documentation **modular** - split by concern (architecture, rules, roadmap, etc.)
- No single doc file should exceed **500 lines** - if it does, split it into focused sub-documents
- Archive completed features to `.claudedoc/archive/` to keep active docs lean
- Update the master index (`CLAUDE.md`) when adding new documentation
- After completing a significant task, check if the documentation in `.claudedoc/` needs updating. If it does, notify me or update it automatically

## Coding Preferences

- **TypeScript strictly** - no `any` types, use proper interfaces and type definitions
- **Functional components** - prefer React function components with hooks over class components
- **Column projections** - always use `src/lib/supabase/projections.ts`, never `.select("*")`
- **React Query** - use for all server state management via hooks in `src/hooks/`
- **Tailwind CSS** - use utility classes, avoid custom CSS unless absolutely necessary
- **Named exports** - prefer named exports over default exports for better refactoring
- **Small, focused functions** - each function should do one thing well

## Editing Rules

- When editing files, always provide the full file content unless I explicitly ask for a snippet, to ensure no logic is accidentally deleted

## Communication Style

- Be **concise** - get to the point quickly
- Don't apologize for errors - just fix them
- Don't over-explain - assume competence
- Use code references with `file_path:line_number` format
- State what you're doing, then do it

## Workflow

1. **Read before editing** - always read relevant files before making changes
2. **Run tests after changes** - execute `npm test` after any code modification
3. **Run build for larger changes** - execute `npm run build` to catch type errors
4. **Verify fixes** - don't assume a fix works, confirm it
5. **One task at a time** - complete and verify before moving to the next
6. **Summarize before major refactors** - before starting a major refactor, summarize your understanding of the current state and ask for confirmation
7. **Search before asking** - if you are unsure where a function is defined, use grep or find before asking me or reading large files blindly

## Project-Specific Rules

- Follow patterns in `.claudedoc/architecture.md` for React Query and location service
- Check `.claudedoc/rules.md` for known issues and testing guidelines
- Use category hierarchy from `src/data/categoryHierarchy.ts` for filtering logic

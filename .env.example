# =============================================================================
# KOKU TRAVEL - Environment Variables
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# DO NOT commit .env.local to git (it's in .gitignore)
# =============================================================================

# =============================================================================
# REQUIRED: Supabase Configuration
# =============================================================================
# Get these from: https://supabase.com/dashboard/project/_/settings/api

NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Service role key (for server-side operations)
# Mark as "Sensitive" in Vercel
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# =============================================================================
# OPTIONAL: Google APIs
# =============================================================================
# Get from: https://console.cloud.google.com/apis/credentials

GOOGLE_PLACES_API_KEY=your-google-places-api-key-here
ROUTING_GOOGLE_MAPS_API_KEY=your-google-maps-api-key-here
GOOGLE_DIRECTIONS_API_KEY=your-google-directions-api-key-here

# =============================================================================
# OPTIONAL: Mapbox Routing
# =============================================================================
# Get from: https://www.mapbox.com/

ROUTING_PROVIDER=mapbox
ROUTING_MAPBOX_ACCESS_TOKEN=your-mapbox-access-token-here
# Public token for client-side map rendering (same token, exposed to browser)
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=your-mapbox-access-token-here

# =============================================================================
# REQUIRED FOR PRODUCTION: Rate Limiting (Upstash Redis)
# =============================================================================
# Get from: https://upstash.com
#
# IMPORTANT: Without Redis, rate limiting uses in-memory storage which does NOT
# work correctly with multiple server instances (Vercel edge functions, multiple
# pods, etc.). This can lead to:
# - Inconsistent rate limiting across instances
# - Potential for abuse by spreading requests across instances
# - Memory leaks in long-running development servers
#
# For production deployments, Redis is REQUIRED for proper rate limiting.
# In development, in-memory fallback is acceptable for testing.

UPSTASH_REDIS_REST_URL=your-redis-url-here
UPSTASH_REDIS_REST_TOKEN=your-redis-token-here

# =============================================================================
# OPTIONAL: Site Configuration
# =============================================================================

NEXT_PUBLIC_SITE_URL=https://your-site.vercel.app

# =============================================================================
# OPTIONAL: Sanity CMS (for guide authoring)
# =============================================================================
# Get from: https://www.sanity.io/manage

NEXT_PUBLIC_SANITY_PROJECT_ID=your-project-id
NEXT_PUBLIC_SANITY_DATASET=production
SANITY_API_VERSION=2024-10-21
SANITY_API_READ_TOKEN=your-read-token
SANITY_API_WRITE_TOKEN=your-write-token
SANITY_REVALIDATE_SECRET=your-webhook-secret

# =============================================================================
# OPTIONAL: Feature Flags
# =============================================================================

# Use mock itinerary data (for development)
NEXT_PUBLIC_USE_MOCK_ITINERARY=false

# Enable/disable external API calls
ENABLE_GOOGLE_PLACES=true
ENABLE_MAPBOX=true

# Disable expensive API calls (for cost control)
CHEAP_MODE=false

# Disable strict env validation in production
VALIDATE_ENV=true
